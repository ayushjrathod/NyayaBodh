import{j as e}from"./ui-C1FR33ZW.js";import{r as a}from"./vendor-DMlfRnyX.js";import{q as s,r}from"./index-GHVuBVY8.js";import"./charts-jwwhqExT.js";import"./utils-COlzZPg4.js";import"./auth-Bdeye9u2.js";import"./router-Dze4JIbL.js";import"./forms-BirKV14m.js";const l=({formData:a,handleChange:r})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Seller Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(s,{label:"Seller Name",name:"seller_name",value:a.seller_name,onChange:r,placeholder:"Enter seller name",isRequired:!0}),e.jsx(s,{label:"Father's Name",name:"seller_father_name",value:a.seller_father_name,onChange:r,placeholder:"Enter father's name",isRequired:!0}),e.jsx(s,{label:"Age",name:"seller_age",type:"number",value:a.seller_age,onChange:r,placeholder:"Enter seller's age",isRequired:!0}),e.jsx(s,{label:"Wife's Name",name:"seller_wife",value:a.seller_wife,onChange:r,placeholder:"Enter wife's name"})]}),e.jsx(s,{type:"textarea",label:"Address",name:"seller_address",value:a.seller_address,onChange:r,placeholder:"Enter seller's address",isRequired:!0}),e.jsx(s,{label:"Sons/Daughters",name:"seller_sons_daughters",value:a.seller_sons_daughters,onChange:r,placeholder:"Enter sons/daughters' names"})]}),n=({formData:a,handleChange:r})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Purchaser Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(s,{label:"Purchaser Name",name:"purchaser_name",value:a.purchaser_name,onChange:r,placeholder:"Enter purchaser name",isRequired:!0}),e.jsx(s,{label:"Father's Name",name:"purchaser_father_name",value:a.purchaser_father_name,onChange:r,placeholder:"Enter father's name",isRequired:!0}),e.jsx(s,{label:"Age",name:"purchaser_age",type:"number",value:a.purchaser_age,onChange:r,placeholder:"Enter purchaser's age",isRequired:!0})]}),e.jsx(s,{type:"textarea",label:"Address",name:"purchaser_address",value:a.purchaser_address,onChange:r,placeholder:"Enter purchaser's address",isRequired:!0})]}),t=({formData:a,handleChange:r})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Property Details"}),e.jsx(s,{type:"textarea",label:"Schedule Property",name:"schedule_property",value:a.schedule_property,onChange:r,placeholder:"Describe the property details",isRequired:!0,minRows:4})]}),o=({formData:a,handleChange:r})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Sale Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(s,{label:"Sale Amount",name:"sale_amount",type:"number",value:a.sale_amount,onChange:r,placeholder:"Enter sale amount",isRequired:!0}),e.jsx(s,{label:"Advance Amount",name:"advance_amount",type:"number",value:a.advance_amount,onChange:r,placeholder:"Enter advance amount",isRequired:!0}),e.jsx(s,{label:"Cheque Number",name:"cheque_no",value:a.cheque_no,onChange:r,placeholder:"Enter cheque number",isRequired:!0}),e.jsx(s,{label:"Bank Name",name:"bank_name",value:a.bank_name,onChange:r,placeholder:"Enter bank name",isRequired:!0}),e.jsx(s,{label:"Cheque Date",name:"cheque_date",type:"date",value:a.cheque_date,onChange:r,isRequired:!0}),e.jsx(s,{label:"Balance Amount",name:"balance_amount",type:"number",value:a.balance_amount,onChange:r,placeholder:"Enter balance amount",isRequired:!0}),e.jsx(s,{label:"Transaction End Date",name:"transaction_end_date",type:"date",value:a.transaction_end_date,onChange:r,isRequired:!0})]}),e.jsx(s,{type:"textarea",label:"Purpose of Sale",name:"purpose_of_sale",value:a.purpose_of_sale,onChange:r,placeholder:"Enter purpose of sale",isRequired:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(s,{label:"Witness 1",name:"witness_1",value:a.witness_1,onChange:r,placeholder:"Enter witness 1 name",isRequired:!0}),e.jsx(s,{label:"Witness 2",name:"witness_2",value:a.witness_2,onChange:r,placeholder:"Enter witness 2 name",isRequired:!0})]})]}),i=({formData:a,handleChange:r})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Previous Ownership Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(s,{label:"Previous Owner",name:"previous_owner",value:a.previous_owner,onChange:r,placeholder:"Enter previous owner name",isRequired:!0}),e.jsx(s,{label:"Previous Sale Deed Date",name:"previous_sale_deed_date",type:"date",value:a.previous_sale_deed_date,onChange:r,isRequired:!0}),e.jsx(s,{label:"Previous Sale Document Number",name:"previous_sale_doct_no",value:a.previous_sale_doct_no,onChange:r,placeholder:"Enter document number",isRequired:!0}),e.jsx(s,{label:"Previous Sale Book 1 Volume Number",name:"previous_sale_book1_volumne_no",value:a.previous_sale_book1_volumne_no,onChange:r,placeholder:"Enter volume number",isRequired:!0}),e.jsx(s,{label:"Previous Sale Page Number (Start)",name:"previous_sale_page_no_start",type:"number",value:a.previous_sale_page_no_start,onChange:r,placeholder:"Enter start page number",isRequired:!0}),e.jsx(s,{label:"Previous Sale Page Number (End)",name:"prev_sale_page_no_end",type:"number",value:a.prev_sale_page_no_end,onChange:r,placeholder:"Enter end page number",isRequired:!0})]})]});function d(){const{currentStep:s,formData:d,progress:u,isFirstStep:m,isLastStep:c,isSubmitting:p,updateField:h,nextStep:_,prevStep:g,setIsSubmitting:b}=((e={},s=1)=>{const[r,l]=a.useState(0),[n,t]=a.useState(e),[o,i]=a.useState({}),[d,u]=a.useState(!1),m=a.useCallback(e=>{t(a=>({...a,...e}))},[]),c=a.useCallback((e,a)=>{t(s=>({...s,[e]:a})),o[e]&&i(a=>({...a,[e]:void 0}))},[o]),p=a.useCallback(()=>{l(e=>Math.min(e+1,s-1))},[s]),h=a.useCallback(()=>{l(e=>Math.max(e-1,0))},[]),_=a.useCallback(e=>{l(Math.max(0,Math.min(e,s-1)))},[s]),g=a.useCallback((e,a)=>{i(s=>({...s,[e]:a}))},[]),b=a.useCallback(()=>{i({})},[]),v=a.useCallback(()=>{l(0),t(e),i({}),u(!1)},[e]);return{currentStep:r,formData:n,errors:o,isSubmitting:d,isFirstStep:0===r,isLastStep:r===s-1,progress:s>1?r/(s-1)*100:100,updateFormData:m,updateField:c,nextStep:p,prevStep:h,goToStep:_,setFieldError:g,clearErrors:b,resetForm:v,setIsSubmitting:u}})({seller_name:"",seller_father_name:"",seller_age:"",seller_address:"",seller_wife:"",seller_sons_daughters:"",purchaser_name:"",purchaser_father_name:"",purchaser_age:"",purchaser_address:"",schedule_property:"",sale_amount:"",advance_amount:"",cheque_no:"",bank_name:"",cheque_date:"",balance_amount:"",transaction_end_date:"",purpose_of_sale:"",previous_owner:"",previous_sale_deed_date:"",previous_sale_doct_no:"",previous_sale_book1_volumne_no:"",previous_sale_page_no_start:"",prev_sale_page_no_end:"",witness_1:"",witness_2:""},5),[v,x]=a.useState(""),[j,f]=a.useState(!1),C=e=>{const{name:a,value:s}=e.target;h(a,s),v&&x("")},S=[{title:"Seller Details",component:e.jsx(l,{formData:d,handleChange:C})},{title:"Purchaser Details",component:e.jsx(n,{formData:d,handleChange:C})},{title:"Property Details",component:e.jsx(t,{formData:d,handleChange:C})},{title:"Sale Details",component:e.jsx(o,{formData:d,handleChange:C})},{title:"Previous Ownership Details",component:e.jsx(i,{formData:d,handleChange:C})}];return e.jsxs(r,{title:"Agreement of Sale Form",steps:S,currentStep:s,progress:u,isFirstStep:m,isLastStep:c,onNext:_,onPrev:g,onSubmit:async()=>{if(Object.values(d).every(e=>""!==e.trim())){b(!0),x("");try{const e=await fetch("https://whale-legal-api.onrender.com/generate_agreement_of_sale_pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(e.ok){const a=await e.blob(),s=URL.createObjectURL(a);window.open(s,"_blank"),f(!0),x(""),setTimeout(()=>URL.revokeObjectURL(s),1e3)}else x("Failed to submit the form. Please try again.")}catch(e){x("An error occurred while submitting the form. Please try again.")}finally{b(!1)}}else x("Please fill in all fields before submitting.")},isSubmitting:p,children:[S[s].component,v&&e.jsx("div",{className:"mt-4 p-3 bg-danger/10 border border-danger/20 rounded-lg",children:e.jsx("p",{className:"text-danger text-sm",children:v})}),j&&e.jsx("div",{className:"mt-4 p-3 bg-success/10 border border-success/20 rounded-lg",children:e.jsx("p",{className:"text-success text-sm",children:"Form submitted successfully! PDF opened in new tab."})})]})}export{d as default};
