import{j as e,t as a,p as l,q as s,r as n,u as t,v as r,b as o,M as d}from"./ui-C1FR33ZW.js";import{r as i}from"./vendor-DMlfRnyX.js";import{C as c,w as h,x as m}from"./index-GHVuBVY8.js";import"./charts-jwwhqExT.js";import"./utils-COlzZPg4.js";import"./auth-Bdeye9u2.js";import"./router-Dze4JIbL.js";import"./forms-BirKV14m.js";const u=({label:a,name:s,value:n,onChange:t,placeholder:r})=>e.jsx(l,{label:a,name:s,value:n,onChange:t,placeholder:r,className:"mb-4"}),x=({formData:a,handleChange:l})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Seller Details"}),e.jsx(u,{label:"Name",name:"seller_name",value:a.seller_name,onChange:l,placeholder:"Enter seller name"}),e.jsx(u,{label:"Father's Name",name:"seller_father_name",value:a.seller_father_name,onChange:l,placeholder:"Enter father's name"}),e.jsx(u,{label:"Age",name:"seller_age",value:a.seller_age,onChange:l,placeholder:"Enter age"}),e.jsx(u,{label:"PAN",name:"seller_pan",value:a.seller_pan,onChange:l,placeholder:"Enter PAN number"}),e.jsx(u,{label:"Address",name:"seller_address",value:a.seller_address,onChange:l,placeholder:"Enter complete address"})]}),p=({formData:a,handleChange:l})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Purchaser Details"}),e.jsx(u,{label:"Name",name:"purchaser_name",value:a.purchaser_name,onChange:l,placeholder:"Enter purchaser name"}),e.jsx(u,{label:"Father's Name",name:"purchaser_father_name",value:a.purchaser_father_name,onChange:l,placeholder:"Enter father's name"}),e.jsx(u,{label:"Age",name:"purchaser_age",value:a.purchaser_age,onChange:l,placeholder:"Enter age"}),e.jsx(u,{label:"PAN",name:"purchaser_pan",value:a.purchaser_pan,onChange:l,placeholder:"Enter PAN number"}),e.jsx(u,{label:"Address",name:"purchaser_address",value:a.purchaser_address,onChange:l,placeholder:"Enter complete address"})]}),j=({formData:a,handleChange:l})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Land Details"}),e.jsx(u,{label:"Size",name:"land_details.size",value:a.land_details.size,onChange:l,placeholder:"Enter land size"}),e.jsx(u,{label:"Location",name:"land_details.location",value:a.land_details.location,onChange:l,placeholder:"Enter land location"}),e.jsx("h4",{className:"text-lg font-medium mb-2 mt-4",children:"Boundaries"}),e.jsx(u,{label:"North",name:"land_details.boundaries.north",value:a.land_details.boundaries.north,onChange:l,placeholder:"North boundary"}),e.jsx(u,{label:"South",name:"land_details.boundaries.south",value:a.land_details.boundaries.south,onChange:l,placeholder:"South boundary"}),e.jsx(u,{label:"East",name:"land_details.boundaries.east",value:a.land_details.boundaries.east,onChange:l,placeholder:"East boundary"}),e.jsx(u,{label:"West",name:"land_details.boundaries.west",value:a.land_details.boundaries.west,onChange:l,placeholder:"West boundary"})]}),b=({formData:l,handleChange:s})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Sale Details"}),e.jsx(u,{label:"Total Consideration",name:"total_consideration",value:l.total_consideration,onChange:s,placeholder:"Enter total amount"}),e.jsx(a,{label:"Cheque Details",name:"cheque_details",value:l.cheque_details,onChange:s,placeholder:"Enter complete cheque details",className:"mb-4"}),e.jsx(u,{label:"Witness 1",name:"witness_1",value:l.witness_1,onChange:s,placeholder:"Enter first witness name"}),e.jsx(u,{label:"Witness 2",name:"witness_2",value:l.witness_2,onChange:s,placeholder:"Enter second witness name"})]});function _(){const[a,l]=i.useState({seller_name:"",seller_father_name:"",seller_age:"",seller_pan:"",seller_address:"",purchaser_name:"",purchaser_father_name:"",purchaser_age:"",purchaser_pan:"",purchaser_address:"",land_details:{size:"",location:"",boundaries:{north:"",south:"",east:"",west:""}},total_consideration:"",cheque_details:"",witness_1:"",witness_2:""}),[u,_]=i.useState(0),[g,f]=i.useState(""),[v,C]=i.useState(!1),[N,y]=i.useState(null),[D,w]=i.useState(!1),E=e=>{const{name:a,value:s}=e.target;l(e=>{if(a.includes(".")){const[l,n,t]=a.split(".");return{...e,[l]:{...e[l],[n]:t?{...e[l][n],[t]:s}:s}}}return{...e,[a]:s}})},P=()=>{w(!1),URL.revokeObjectURL(N),y(null)},S=[{title:"Seller Details",component:e.jsx(x,{formData:a,handleChange:E})},{title:"Purchaser Details",component:e.jsx(p,{formData:a,handleChange:E})},{title:"Land Details",component:e.jsx(j,{formData:a,handleChange:E})},{title:"Sale Details",component:e.jsx(b,{formData:a,handleChange:E})}];return e.jsxs("div",{className:"flex justify-center items-center min-h-screen bg-background p-4",children:[e.jsxs(s,{className:"w-full max-w-4xl",children:[e.jsxs(n,{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Land Sale Deed Form"}),e.jsx(t,{value:u/(S.length-1)*100,className:"max-w-md",color:"primary"})]}),e.jsx(r,{children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault();if(Object.values(a).every(e=>"object"==typeof e?Object.values(e).every(e=>"object"==typeof e?Object.values(e).every(e=>""!==e.trim()):""!==e.trim()):""!==e.trim()))try{const e=await fetch("https://whale-legal-api.onrender.com/generate_land_sale_deed_pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(e.ok){const a=await e.blob(),l=URL.createObjectURL(a);y(l),w(!0),C(!0),f("")}else f("Failed to generate PDF. Please try again.")}catch(l){f("An error occurred. Please try again.")}else f("Please fill in all fields."),C(!1)},children:[S[u].component,g&&e.jsx("p",{className:"text-red-500 text-center",children:g}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsxs(o,{auto:!0,color:"default",disabled:0===u,onClick:()=>_(u-1),children:[e.jsx(c,{className:"mr-2"}),"Previous"]}),u===S.length-1?e.jsxs(o,{auto:!0,color:"success",type:"submit",children:[e.jsx(h,{className:"mr-2"}),"Generate PDF"]}):e.jsxs(o,{auto:!0,color:"primary",onClick:()=>_(u+1),children:["Next",e.jsx(m,{className:"ml-2"})]})]}),v&&e.jsx("p",{className:"text-green-500 text-center mt-4",children:"PDF generated successfully!"})]})})]}),e.jsxs(d,{isOpen:D,onClose:P,children:[e.jsx(d.Header,{children:e.jsx("h3",{className:"text-lg font-semibold",children:"PDF Preview"})}),e.jsx(d.Body,{children:N&&e.jsx("iframe",{src:N,width:"100%",height:"600px",title:"PDF Preview"})}),e.jsx(d.Footer,{children:e.jsx(o,{auto:!0,color:"error",onClick:P,children:"Close"})})]})]})}export{_ as default};
