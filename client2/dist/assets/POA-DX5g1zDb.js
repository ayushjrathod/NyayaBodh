import{j as e,t as a,p as s,q as n,r as t,u as l,v as r,b as o,M as i}from"./ui-C1FR33ZW.js";import{r as m}from"./vendor-DMlfRnyX.js";import{C as c,w as d,x as h}from"./index-GHVuBVY8.js";import"./charts-jwwhqExT.js";import"./utils-COlzZPg4.js";import"./auth-Bdeye9u2.js";import"./router-Dze4JIbL.js";import"./forms-BirKV14m.js";const p=({label:a,name:n,value:t,onChange:l,placeholder:r})=>e.jsx(s,{label:a,name:n,value:t,onChange:l,placeholder:r,className:"mb-4"}),x=({formData:s,handleChange:n})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Principal Details"}),e.jsx(p,{label:"Name",name:"principal_name",value:s.principal_name,onChange:n,placeholder:"Enter principal name"}),e.jsx(p,{label:"Age",name:"principal_age",value:s.principal_age,onChange:n,placeholder:"Enter principal age"}),e.jsx(a,{label:"Address",name:"principal_address",value:s.principal_address,onChange:n,placeholder:"Enter principal address",className:"mb-4"})]}),j=({formData:s,handleChange:n})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Attorney Details"}),e.jsx(p,{label:"Name",name:"attorney_name",value:s.attorney_name,onChange:n,placeholder:"Enter attorney name"}),e.jsx(p,{label:"Age",name:"attorney_age",value:s.attorney_age,onChange:n,placeholder:"Enter attorney age"}),e.jsx(a,{label:"Address",name:"attorney_address",value:s.attorney_address,onChange:n,placeholder:"Enter attorney address",className:"mb-4"})]}),u=({formData:s,handleChange:n})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Power Details"}),e.jsx(a,{label:"Powers Granted",name:"powers_granted",value:s.powers_granted,onChange:n,placeholder:"Enter powers being granted",className:"mb-4"}),e.jsx(p,{label:"Duration",name:"duration",value:s.duration,onChange:n,placeholder:"Enter duration of power of attorney"})]}),g=({formData:a,handleChange:s})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Witness Details"}),e.jsx(p,{label:"Witness 1 Name",name:"witness_1_name",value:a.witness_1_name,onChange:s,placeholder:"Enter witness 1 name"}),e.jsx(p,{label:"Witness 2 Name",name:"witness_2_name",value:a.witness_2_name,onChange:s,placeholder:"Enter witness 2 name"})]});function b(){const[a,s]=m.useState({principal_name:"",principal_age:"",principal_address:"",attorney_name:"",attorney_age:"",attorney_address:"",powers_granted:"",duration:"",witness_1_name:"",witness_2_name:""}),[p,b]=m.useState(0),[f,_]=m.useState(""),[y,w]=m.useState(!1),[v,C]=m.useState(null),[N,D]=m.useState(!1),P=e=>{const{name:a,value:n}=e.target;s(e=>({...e,[a]:n}))},E=()=>{D(!1),URL.revokeObjectURL(v),C(null)},S=[{title:"Principal Details",component:e.jsx(x,{formData:a,handleChange:P})},{title:"Attorney Details",component:e.jsx(j,{formData:a,handleChange:P})},{title:"Power Details",component:e.jsx(u,{formData:a,handleChange:P})},{title:"Witness Details",component:e.jsx(g,{formData:a,handleChange:P})}];return e.jsxs("div",{className:"flex justify-center items-center min-h-screen bg-background p-4",children:[e.jsxs(n,{className:"w-full max-w-4xl",children:[e.jsxs(t,{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Power of Attorney Form"}),e.jsx(l,{value:p/(S.length-1)*100,className:"max-w-md",color:"primary"})]}),e.jsx(r,{children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault();if(Object.values(a).every(e=>""!==e.trim()))try{const e=await fetch("https://whale-legal-api.onrender.com/generate-pow-pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(e.ok){const a=await e.blob(),s=URL.createObjectURL(a);C(s),D(!0),w(!0),_("")}else _("Failed to submit the form. Please try again.")}catch(s){_("An error occurred while submitting the form. Please try again.")}else _("Please fill in all fields before submitting."),w(!1)},children:[S[p].component,f&&e.jsx("p",{className:"text-red-500 text-center",children:f}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsxs(o,{auto:!0,color:"default",disabled:0===p,onClick:()=>b(p-1),children:[e.jsx(c,{className:"mr-2"}),"Previous"]}),p===S.length-1?e.jsxs(o,{auto:!0,color:"success",type:"submit",children:[e.jsx(d,{className:"mr-2"}),"Submit"]}):e.jsxs(o,{auto:!0,color:"primary",onClick:()=>b(p+1),children:["Next",e.jsx(h,{className:"ml-2"})]})]}),y&&e.jsx("p",{className:"text-green-500 text-center mt-4",children:"Form submitted successfully!"})]})})]}),e.jsxs(i,{isOpen:N,onClose:E,children:[e.jsx(i.Header,{children:e.jsx("h3",{className:"text-lg font-semibold",children:"PDF Preview"})}),e.jsx(i.Body,{children:v&&e.jsx("iframe",{src:v,width:"100%",height:"600px",title:"PDF Preview"})}),e.jsx(i.Footer,{children:e.jsx(o,{auto:!0,color:"error",onClick:E,children:"Close"})})]})]})}export{b as default};
