import{j as e,p as a,q as s,r as n,u as t,v as l,b as r,M as o}from"./ui-C1FR33ZW.js";import{r as i}from"./vendor-DMlfRnyX.js";import{C as d,w as m,x as c}from"./index-GHVuBVY8.js";import"./charts-jwwhqExT.js";import"./utils-COlzZPg4.js";import"./auth-Bdeye9u2.js";import"./router-Dze4JIbL.js";import"./forms-BirKV14m.js";const h=({label:s,name:n,value:t,onChange:l,placeholder:r})=>e.jsx(a,{label:s,name:n,value:t,onChange:l,placeholder:r,className:"mb-4"}),p=({formData:a,handleChange:s})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Owner Details"}),e.jsx(h,{label:"Owner Name",name:"owner_name",value:a.owner_name,onChange:s,placeholder:"Enter owner name"}),e.jsx(h,{label:"Owner Address",name:"owner_address",value:a.owner_address,onChange:s,placeholder:"Enter owner address"}),e.jsx(h,{label:"Owner Age",name:"owner_age",value:a.owner_age,onChange:s,placeholder:"Enter owner age"})]}),x=({formData:a,handleChange:s})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Witnesses' Details"}),e.jsx(h,{label:"Witness 1 Name",name:"witness_1_name",value:a.witness_1_name,onChange:s,placeholder:"Enter witness 1 name"}),e.jsx(h,{label:"Witness 1 Address",name:"witness_1_address",value:a.witness_1_address,onChange:s,placeholder:"Enter witness 1 address"}),e.jsx(h,{label:"Witness 2 Name",name:"witness_2_name",value:a.witness_2_name,onChange:s,placeholder:"Enter witness 2 name"}),e.jsx(h,{label:"Witness 2 Address",name:"witness_2_address",value:a.witness_2_address,onChange:s,placeholder:"Enter witness 2 address"})]}),j=({formData:a,handleChange:s})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Property Details"}),e.jsx(h,{label:"Property Type",name:"property_type",value:a.property_type,onChange:s,placeholder:"Enter property type (e.g., Flat, Apartment)"}),e.jsx(h,{label:"Property Address",name:"property_address",value:a.property_address,onChange:s,placeholder:"Enter property address"}),e.jsx(h,{label:"Property Size",name:"property_size",value:a.property_size,onChange:s,placeholder:"Enter property size"})]}),_=({formData:a,handleChange:s})=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Sale Details"}),e.jsx(h,{label:"Sale Price",name:"sale_price",value:a.sale_price,onChange:s,placeholder:"Enter sale price"}),e.jsx(h,{label:"Payment Method",name:"payment_method",value:a.payment_method,onChange:s,placeholder:"Enter payment method"}),e.jsx(h,{label:"Sale Date",name:"sale_date",value:a.sale_date,onChange:s,placeholder:"Enter sale date"})]});function u(){const[a,h]=i.useState({owner_name:"",owner_address:"",owner_age:"",witness_1_name:"",witness_1_address:"",witness_2_name:"",witness_2_address:"",property_type:"",property_address:"",property_size:"",sale_price:"",payment_method:"",sale_date:""}),[u,g]=i.useState(0),[w,y]=i.useState(""),[b,f]=i.useState(!1),[v,C]=i.useState(null),[D,N]=i.useState(!1),P=e=>{const{name:a,value:s}=e.target;h(e=>({...e,[a]:s}))},S=()=>{N(!1),URL.revokeObjectURL(v),C(null)},E=[{title:"Owner Details",component:e.jsx(p,{formData:a,handleChange:P})},{title:"Witnesses Details",component:e.jsx(x,{formData:a,handleChange:P})},{title:"Property Details",component:e.jsx(j,{formData:a,handleChange:P})},{title:"Sale Details",component:e.jsx(_,{formData:a,handleChange:P})}];return e.jsxs("div",{className:"flex justify-center items-center min-h-screen bg-background p-4",children:[e.jsxs(s,{className:"w-full max-w-4xl",children:[e.jsxs(n,{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Deed of Sale Form"}),e.jsx(t,{value:u/(E.length-1)*100,className:"max-w-md",color:"primary"})]}),e.jsx(l,{children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault();if(Object.values(a).every(e=>""!==e.trim()))try{const e=await fetch("https://whale-legal-api.onrender.com/generate_will_deed_pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(e.ok){const a=await e.blob(),s=URL.createObjectURL(a);C(s),N(!0),f(!0),y("")}else y("Failed to generate the PDF. Please try again.")}catch(s){y("An error occurred while generating the PDF. Please try again.")}else y("Please fill in all fields before submitting."),f(!1)},children:[E[u].component,w&&e.jsx("p",{className:"text-red-500 text-center",children:w}),e.jsxs("div",{className:"flex justify-between mt-4",children:[e.jsxs(r,{auto:!0,color:"default",disabled:0===u,onClick:()=>g(u-1),children:[e.jsx(d,{className:"mr-2"}),"Previous"]}),u===E.length-1?e.jsxs(r,{auto:!0,color:"success",type:"submit",children:[e.jsx(m,{className:"mr-2"}),"Generate PDF"]}):e.jsxs(r,{auto:!0,color:"primary",onClick:()=>g(u+1),children:["Next",e.jsx(c,{className:"ml-2"})]})]}),b&&e.jsx("p",{className:"text-green-500 text-center mt-4",children:"PDF generated successfully!"})]})})]}),e.jsxs(o,{isOpen:D,onClose:S,children:[e.jsx(o.Header,{children:e.jsx("h3",{className:"text-lg font-semibold",children:"PDF Preview"})}),e.jsx(o.Body,{children:v&&e.jsx("iframe",{src:v,width:"100%",height:"600px",title:"PDF Preview"})}),e.jsx(o.Footer,{children:e.jsx(r,{auto:!0,color:"error",onClick:S,children:"Close"})})]})]})}export{u as default};
